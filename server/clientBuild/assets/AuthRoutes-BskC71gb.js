import{u as p,j as e,a as N,r as k,G as A,t as T,l as E,c as R,s as z,d as B,e as $,f as G,h as D}from"./index-9h6I275U.js";import{u as I,L as w,a as Z,b as H,C as U,B as f,I as _,c as v,d as y,T as P,e as C,f as x,g as L,h as S,i as W,R as Y,j as g,E as J,P as K}from"./AppRouter-F2Qym1Rx.js";import{u as q,L as h}from"./index.esm-CES2P66D.js";const b=({children:a})=>{const{theme:l}=I(),r=p(o=>o.user);return e.jsxs("div",{className:"h-dvh overflow-hidden",children:[e.jsx("div",{className:"fixed top-0 left-0 m-4 z-20",children:e.jsx(w,{to:"/",className:"w-fit",children:e.jsx(Z,{className:""})})}),e.jsxs("div",{className:"relative flex justify-center items-center w-full h-full xl:px-20",children:[(r==null?void 0:r.loading)&&e.jsx("div",{className:"absolute w-full h-full bg-background/40 z-10",children:e.jsx(H,{className:"size-5 absolute translate-x-[-50%] translate-y-[-50%] top-1/2 left-1/2"})}),e.jsx(U,{className:"max-w-82 lg:max-w-96 w-full bg-background/40 gap-4 py-4 transform slide-in-from-bottom-16 transition-transform duration-300",children:a})]}),e.jsxs("span",{className:"fixed bottom-0 my-4 text-xs text-muted-foreground w-full text-center flex flex-col md:flex-row items-center md:items-start justify-start md:justify-center md:gap-1",children:[e.jsx("span",{children:"By clicking continue, you agree to our "}),e.jsxs("span",{children:[e.jsx(w,{to:"/legal/terms",className:"underline",children:"Terms of Service"})," ","and"," ",e.jsx(w,{to:"/legal/privacy",className:"underline",children:"Privacy Policy"})]})]}),e.jsx("div",{className:"fixed -z-10 top-0 left-0 w-full h-full bg-white dark:bg-black",children:e.jsx("img",{src:"/backgrounds/auth.jpg",className:`w-full h-full object-cover opacity-40 ${l==="dark"?"":"invert"}`})})]})},M=()=>{const a=N(),l=p(s=>s.user),r=k.useRef(null),o=s=>{const{credential:i}=s;a(E({credential:i}))},t=()=>{var s,i;(i=(s=r.current)==null?void 0:s.getElementsByTagName("div"))==null||i[3].click()};return e.jsxs(e.Fragment,{children:[e.jsx("span",{ref:r,style:{display:"none"},children:e.jsx(A,{onSuccess:s=>o(s),onError:()=>T.error("Something went wrong")})}),e.jsxs(f,{onClick:t,disabled:l==null?void 0:l.loading,type:"button",className:"w-full mt-2 px-4 flex items-center justify-center gap-1",children:[e.jsx(_,{}),e.jsx("span",{children:"Login with Google"})]})]})},O=()=>{const{register:a,handleSubmit:l,getValues:r,setError:o,formState:{errors:t}}=q(),s=p(n=>n.user),i=N(),m=l(n=>{i(E({email:n.email,password:n.password}))}),c=()=>{const n=r("email"),u=r("password");if(n){if(!u){o("password",{message:"This field is required."});return}}else{o("email",{message:"This field is required."});return}i(R({email:n,password:u}))},d=()=>{const n=r("email");if(!n){o("email",{message:"This field is required."});return}i(z({email:n}))};return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx(y,{children:e.jsx(P,{className:"text-center",children:"Login"})})}),e.jsx(C,{className:"px-4",children:e.jsxs("form",{className:"flex flex-col gap-2",onSubmit:m,children:[e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(h,{htmlFor:"email",children:"Email"}),e.jsx(x,{...a("email",{required:"This field is required."}),id:"email",type:"email",placeholder:"Your email address",className:"w-full",autoComplete:"email"}),t.email&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-2",children:[e.jsx(h,{htmlFor:"password",children:"Password"}),e.jsx(x,{...a("password",{required:"This field is required."}),id:"password",type:"password",placeholder:"Password",className:"w-full",autoComplete:"password"}),t.password&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.password.message})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:" flex gap-1 text-xs text-muted-foreground",children:[e.jsx("span",{onClick:c,className:"cursor-pointer",children:"Send Verfication"}),e.jsx("span",{children:"Â·"}),e.jsx("span",{onClick:d,className:"cursor-pointer",children:"Forgot Password"})]})}),e.jsx(f,{disabled:s==null?void 0:s.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-1",children:e.jsx("span",{children:"Login"})})]})}),e.jsxs(L,{className:"flex-col gap-1 px-4",children:[e.jsxs("div",{className:"text-sm w-full text-center text-black/70 dark:text-white/70",children:["don't have an account?"," ",e.jsx(w,{to:"/auth/signup",className:"text-blue-500",children:"Signup"})]}),e.jsxs("div",{className:"flex w-full gap-1 items-center text-muted-foreground",children:[e.jsx("span",{className:"pt-0.5 mt-1 w-full bg-muted-foreground/60"}),e.jsx("span",{children:"or"}),e.jsx("span",{className:"pt-0.5 mt-1 w-full bg-muted-foreground/60"})]}),e.jsx(M,{})]})]})},Q=()=>{const{register:a,handleSubmit:l,watch:r,reset:o,formState:{errors:t}}=q(),s=p(c=>c.user),i=N(),m=l(c=>{i(B({email:c.email,name:c.name,password:c.password}))});return k.useEffect(()=>{!(s!=null&&s.error)&&!(s!=null&&s.loading)&&(s!=null&&s.isVerificationSent)&&o()},[s]),e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx(y,{children:e.jsx(P,{className:"text-center",children:"Signup"})})}),e.jsx(C,{className:"px-4",children:e.jsxs("form",{className:"flex flex-col gap-2",onSubmit:m,children:[e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(h,{htmlFor:"name",children:"Name"}),e.jsx(x,{...a("name",{required:"Name is required"}),id:"name",type:"text",placeholder:"Name",className:"w-full",autoComplete:"name"}),t.name&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.name.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(h,{htmlFor:"email",children:"Email"}),e.jsx(x,{...a("email",{required:"Email is required"}),id:"email",type:"email",placeholder:"Email",className:"w-full",autoComplete:"email"}),t.email&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(h,{htmlFor:"password",children:"Password"}),e.jsx(x,{...a("password",{required:"Password is required",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Password must be at least 8 characters, and contain at least one uppercase letter, one lowercase letter, one number, and one special character"}}),id:"password",type:"password",placeholder:"Password",className:"w-full",autoComplete:"new-password"}),t.password&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.password.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(h,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(x,{...a("confirmPassword",{required:"Confirm Password is required",validate:c=>{if(c!==r("password"))return"Passwords do not match"}}),id:"confirmPassword",type:"password",placeholder:"Confirm Password",className:"w-full",autoComplete:"new-password"}),t.confirmPassword&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.confirmPassword.message})]}),e.jsx(f,{disabled:s==null?void 0:s.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:e.jsx("span",{children:"Signup"})})]})}),e.jsx(L,{className:"px-4",children:e.jsxs("div",{className:"text-sm text-center w-full text-black/70 dark:text-white/70",children:["already have an account?"," ",e.jsx(w,{to:"/auth/login",className:"text-blue-500",children:"Login"})]})})]})},X=()=>{const a=p(j=>j.user),l=N(),[r,o]=S(),t=r.get("email"),s=r.get("vt"),i=r.get("uid"),{register:m,handleSubmit:c,watch:d,setValue:n,formState:{errors:u}}=q(),V=c(j=>{!s||!i||l($({uid:i,pw:j.password,vt:s})).then(()=>{n("password",""),n("confirmPassword","")})}),F=!t||!s||!i;return e.jsxs(e.Fragment,{children:[e.jsxs(v,{children:[e.jsx(y,{children:e.jsx(P,{className:"text-center",children:F?"Huh!?":"Reset Password"})}),e.jsx("div",{className:"text-lg text-center font-semibold",children:e.jsx("h4",{children:F?"No email! nothing!?":t})})]}),e.jsx(C,{className:"px-4",children:e.jsxs("form",{className:"flex flex-col gap-2",onSubmit:V,children:[e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(h,{htmlFor:"password",children:"Password"}),e.jsx(x,{...m("password",{required:"Password is required",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Password must be at least 8 characters, and contain at least one uppercase letter, one lowercase letter, one number, and one special character"}}),id:"password",type:"password",placeholder:"Password",className:"w-full",autoComplete:"new-password"}),u.password&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:u.password.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(h,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(x,{...m("confirmPassword",{required:"Confirm Password is required",validate:j=>{if(j!==d("password"))return"Passwords do not match"}}),id:"confirmPassword",type:"password",placeholder:"Confirm Password",className:"w-full",autoComplete:"new-password"}),u.confirmPassword&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:u.confirmPassword.message})]}),e.jsx(f,{disabled:a==null?void 0:a.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:e.jsx("span",{children:"Reset"})})]})})]})},ee=()=>{const a=p(n=>n.user),[l,r]=S(),o=l.get("email"),t=l.get("uid"),s=l.get("vt"),i=N(),m=()=>{!t||!s||i(G({uid:t.toString(),vt:s.toString()}))},c=()=>{!t||!s||i(D({uid:t.toString(),vt:s.toString()}))},d=!t||!s||!o;return e.jsxs(e.Fragment,{children:[e.jsxs(v,{children:[e.jsx(y,{children:e.jsx(P,{className:"text-center",children:d?"Huh!?":"Verifying Email"})}),e.jsx("div",{className:"text-lg text-center font-semibold",children:e.jsx("h4",{children:d?"No email! nothing!?":o})})]}),e.jsxs(C,{className:"flex flex-col items-center gap-6",children:[e.jsx("div",{className:"text-muted-foreground text-center text-sm",children:d?"The heck, you call that a vaild verfication link!? Where are the query params?":`An attempt was made to create an account on Ref.com. Verify
                    your email by clicking the verify email link, ignoring this
                    email if you did not create an account.`}),e.jsx(f,{disabled:d||a.loading,onClick:m,className:"w-full",children:"Verify Email"}),e.jsx(f,{disabled:d||a.loading,onClick:c,className:"w-full",variant:"destructive",children:"Cancel & Delete Account"})]})]})},re=()=>{const a=p(r=>r.user),l=W();return k.useEffect(()=>{a!=null&&a.isAuthenticated&&l("/workspace")},[a==null?void 0:a.isAuthenticated]),e.jsxs(Y,{children:[e.jsx(g,{path:"login",element:e.jsx(b,{children:e.jsx(O,{})})}),e.jsx(g,{path:"signup",element:e.jsx(b,{children:e.jsx(Q,{})})}),e.jsx(g,{path:"emailverify",element:e.jsx(b,{children:e.jsx(ee,{})})}),e.jsx(g,{path:"passwordreset",element:e.jsx(b,{children:e.jsx(X,{})})}),e.jsx(g,{path:"*",element:e.jsx(J,{pageData:K.PageNotFound})})]})};export{re as default};
