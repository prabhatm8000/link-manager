import{j as e,u,a as f,r as x,G as T,t as A,l as E,c as R,d as O,e as S}from"./index-DMoVFdqc.js";import{T as g,I as z,u as I,L as b,a as $,C as B,B as h,b as D,c as v,d as y,e as C,f as P,g as d,h as q,i as G,R as V,j,E as Z,P as H}from"./AppRouter-CfapeeQu.js";import{u as k,L as m}from"./index.esm-Vlpi7PWi.js";const M=({logoSize:l,className:i,showLogo:t=!0,showText:s=!0})=>e.jsxs(g,{className:`text-3xl flex gap-2 items-center ${i}`,children:[t&&e.jsx(z,{size:l}),s&&e.jsx("span",{children:"Ref.com"})]}),N=({children:l})=>{const{theme:i}=I(),t=u(s=>s.user);return e.jsxs("div",{className:"h-screen overflow-hidden",children:[e.jsx("div",{className:"fixed top-0 left-0 m-4 z-20",children:e.jsx(b,{to:"/",className:"w-fit",children:e.jsx(M,{className:""})})}),e.jsxs("div",{className:"relative flex justify-center items-center w-full h-full",children:[(t==null?void 0:t.loading)&&e.jsx("div",{className:"absolute w-full h-full bg-background/40 z-10",children:e.jsx($,{className:"size-5 absolute translate-x-[-50%] translate-y-[-50%] top-1/2 left-1/2"})}),e.jsx(B,{className:"max-w-96 w-full bg-transparent",children:l})]}),e.jsx("div",{className:"fixed -z-10 top-0 left-0 w-full h-full bg-white dark:bg-black",children:e.jsx("img",{src:"/backgrounds/auth-dark.jpg",className:`w-full h-full object-cover opacity-40 ${i==="dark"?"":"invert"}`})})]})},U=()=>{const l=f(),i=u(a=>a.user),t=x.useRef(null),s=a=>{const{credential:n}=a;l(E({credential:n}))},r=()=>{var a,n;(n=(a=t.current)==null?void 0:a.getElementsByTagName("div"))==null||n[3].click()};return e.jsxs(e.Fragment,{children:[e.jsx("span",{ref:t,style:{display:"none"},children:e.jsx(T,{onSuccess:a=>s(a),onError:()=>A.error("Something went wrong")})}),e.jsxs(h,{onClick:r,disabled:i==null?void 0:i.loading,type:"button",className:"w-full mt-2 px-4 flex items-center justify-center gap-1",children:[e.jsx(D,{}),e.jsx("span",{children:"Login with Google"})]})]})},Y=()=>{const{register:l,handleSubmit:i,formState:{errors:t}}=k(),s=u(o=>o.user),r=f(),a=v();x.useEffect(()=>{s!=null&&s.isAuthenticated&&a("/workspace")},[s]);const n=i(o=>{r(E({email:o.email,password:o.password}))});return e.jsxs(e.Fragment,{children:[e.jsx(y,{children:e.jsx(C,{children:e.jsx(g,{className:"text-center",children:"Login"})})}),e.jsx(P,{children:e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:n,children:[e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(d,{...l("email",{required:"This field is required."}),id:"email",type:"email",placeholder:"Your email address",className:"w-full",autoComplete:"email"}),t.email&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(d,{...l("password",{required:"This field is required."}),id:"password",type:"password",placeholder:"Password",className:"w-full",autoComplete:"password"}),t.password&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.password.message})]}),e.jsx(h,{disabled:s==null?void 0:s.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-1",children:e.jsx("span",{children:"Login"})})]})}),e.jsxs(q,{className:"flex-col gap-4",children:[e.jsxs("div",{className:"w-full text-center text-black/70 dark:text-white/70",children:["don't have an account?"," ",e.jsx(b,{to:"/auth/signup",className:"text-blue-500",children:"Signup"})]}),e.jsxs("div",{className:"flex w-full gap-1 items-center text-muted-foreground",children:[e.jsx("span",{className:"pt-0.5 mt-1 w-full bg-muted-foreground/60"}),e.jsx("span",{children:"or"}),e.jsx("span",{className:"pt-0.5 mt-1 w-full bg-muted-foreground/60"})]}),e.jsx(U,{})]})]})},L=2.5*60,J=()=>{const{register:l,handleSubmit:i}=k(),t=G(),s=u(p=>p.user),r=f(),a=v(),[n,o]=x.useState(L);x.useEffect(()=>{if(n<=0)return;const p=setInterval(()=>{o(F=>F-1)},1e3);return()=>clearInterval(p)},[n]);const w=i(p=>{r(R({email:t.email,otp:p.otp}))}),c=()=>{r(O()).then(()=>{o(L)})};return x.useEffect(()=>{s.isAuthenticated&&a("/workspace")},[s.isAuthenticated]),e.jsxs(e.Fragment,{children:[e.jsx(y,{children:e.jsx(C,{children:e.jsx(g,{className:"text-center",children:"Signup"})})}),e.jsx(P,{children:e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:w,children:[e.jsxs("p",{className:"text-center",children:["OTP sent to ",t.email]}),e.jsx(d,{...l("otp",{required:!0}),id:"otp",type:"text",placeholder:"OTP",className:"w-full",autoComplete:"name"}),e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("span",{children:`${Math.floor(n/60)}:${(n%60).toString().padStart(2,"0")}`}),e.jsx(h,{disabled:(s==null?void 0:s.loading)||n>0,type:"button",variant:"link",onClick:c,className:s!=null&&s.loading||n>0?"":"hover:underline",children:"resend"})]}),e.jsx(h,{disabled:s==null?void 0:s.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:e.jsx("span",{children:"Verify"})})]})})]})},K=()=>{const{register:l,handleSubmit:i,getValues:t,watch:s,formState:{errors:r}}=k(),a=u(c=>c.user),n=f(),o=v(),w=i(c=>{n(S({email:c.email,name:c.name,password:c.password}))});return x.useEffect(()=>{!(a!=null&&a.error)&&!(a!=null&&a.loading)&&(a!=null&&a.isOtpSent)&&o("/auth/otp/"+t("email"))},[a]),e.jsxs(e.Fragment,{children:[e.jsx(y,{children:e.jsx(C,{children:e.jsx(g,{className:"text-center",children:"Signup"})})}),e.jsx(P,{children:e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:w,children:[e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"name",children:"Name"}),e.jsx(d,{...l("name",{required:"Name is required"}),id:"name",type:"text",placeholder:"Name",className:"w-full",autoComplete:"name"}),r.name&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:r.name.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(d,{...l("email",{required:"Email is required"}),id:"email",type:"email",placeholder:"Email",className:"w-full",autoComplete:"email"}),r.email&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:r.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(d,{...l("password",{required:"Password is required",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Password must be at least 8 characters, and contain at least one uppercase letter, one lowercase letter, one number, and one special character"}}),id:"password",type:"password",placeholder:"Password",className:"w-full",autoComplete:"new-password"}),r.password&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:r.password.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(d,{...l("confirmPassword",{required:"Confirm Password is required",validate:c=>{if(c!==s("password"))return"Passwords do not match"}}),id:"confirmPassword",type:"password",placeholder:"Confirm Password",className:"w-full",autoComplete:"new-password"}),r.confirmPassword&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:r.confirmPassword.message})]}),e.jsx(h,{disabled:a==null?void 0:a.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:e.jsx("span",{children:"Signup"})})]})}),e.jsx(q,{children:e.jsxs("div",{className:"text-center w-full text-black/70 dark:text-white/70",children:["already have an account?"," ",e.jsx(b,{to:"/auth/login",className:"text-blue-500",children:"Login"})]})})]})},_=()=>e.jsxs(V,{children:[e.jsx(j,{path:"login",element:e.jsx(N,{children:e.jsx(Y,{})})}),e.jsx(j,{path:"signup",element:e.jsx(N,{children:e.jsx(K,{})})}),e.jsx(j,{path:"otp/:email",element:e.jsx(N,{children:e.jsx(J,{})})}),e.jsx(j,{path:"*",element:e.jsx(Z,{pageData:H.PageNotFound})})]});export{_ as default};
