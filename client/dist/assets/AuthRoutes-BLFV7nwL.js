import{j as e,u as b,c as w,r as p,l as A,e as L,b as E,f as T,h as $}from"./index-DZ9pMTmL.js";import F from"./PageNotFound-6uA3TzI5.js";import{h as O,u as N,L as m,I as d}from"./label-DdtdVlmg.js";import{u as v,T as f,B as u,L as k,a as y,b as R,c as z,R as I,d as h}from"./AppRouter-C2-D9t2c.js";const D=a=>{switch(a){case"danger":return"bg-red-500 dark:bg-red-900";case"danger-outline":return"bg-white/50 border border-red-500 dark:bg-black/50 dark:border-red-400";case"outline":return"bg-transparent border border-black/50 dark:border-white/50";case"primary":return"bg-black text-white dark:bg-white dark:text-black";case"secondary":return"bg-black/30 dark:bg-white/30";default:return""}},P=a=>{const r=`${D(a.variant)} ${O(a.roundness)}`;return e.jsx("div",{...a,className:`${r} p-4 outline-none ${a.className}`,children:a==null?void 0:a.children})},V=()=>{const{register:a,handleSubmit:r,formState:{errors:i}}=N(),s=b(o=>o.user),t=w(),l=v();p.useEffect(()=>{s!=null&&s.isAuthenticated&&l("/workspace")},[s]);const n=r(o=>{t(A({email:o.email,password:o.password}))});return e.jsxs(P,{className:"p-6 flex flex-col gap-8 w-full backdrop-blur-xs",variant:"none",children:[e.jsx(f,{className:"text-center",children:"Login"}),e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:n,children:[e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(d,{...a("email",{required:"This field is required."}),id:"email",type:"email",placeholder:"Email",className:"w-full",autoComplete:"email"}),i.email&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:i.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(d,{...a("password",{required:"This field is required."}),id:"password",type:"password",placeholder:"Password",className:"w-full",autoComplete:"password"}),i.password&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:i.password.message})]}),e.jsxs(u,{disabled:s==null?void 0:s.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:[(s==null?void 0:s.loading)&&e.jsx(k,{className:"size-5"}),e.jsx("span",{children:"Login"})]})]}),e.jsxs("div",{className:"text-center text-black/70 dark:text-white/70",children:["don't have an account?"," ",e.jsx(y,{to:"/auth/signup",className:"text-blue-500",children:"Signup"})]})]})},S=()=>{const{register:a,handleSubmit:r,getValues:i,watch:s,formState:{errors:t}}=N(),l=b(c=>c.user),n=w(),o=v(),j=r(c=>{n(L({email:c.email,name:c.name,password:c.password}))});return p.useEffect(()=>{!(l!=null&&l.error)&&!(l!=null&&l.loading)&&(l!=null&&l.isOtpSent)&&o("/auth/otp/"+i("email"))},[l]),e.jsxs(P,{variant:"none",className:"p-6 flex flex-col gap-8 w-full backdrop-blur-xs",children:[e.jsx(f,{className:"text-center",children:"Signup"}),e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:j,children:[e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"name",children:"Name"}),e.jsx(d,{...a("name",{required:"Name is required"}),id:"name",type:"text",placeholder:"Name",className:"w-full",autoComplete:"name"}),t.name&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.name.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(d,{...a("email",{required:"Email is required"}),id:"email",type:"email",placeholder:"Email",className:"w-full",autoComplete:"email"}),t.email&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(d,{...a("password",{required:"Password is required",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Password must be at least 8 characters, and contain at least one uppercase letter, one lowercase letter, one number, and one special character"}}),id:"password",type:"password",placeholder:"Password",className:"w-full",autoComplete:"new-password"}),t.password&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.password.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(d,{...a("confirmPassword",{required:"Confirm Password is required",validate:c=>{if(c!==s("password"))return"Passwords do not match"}}),id:"confirmPassword",type:"password",placeholder:"Confirm Password",className:"w-full",autoComplete:"new-password"}),t.confirmPassword&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.confirmPassword.message})]}),e.jsxs(u,{disabled:l==null?void 0:l.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:[(l==null?void 0:l.loading)&&e.jsx(k,{className:"size-5"}),e.jsx("span",{children:"Signup"})]})]}),e.jsxs("div",{className:"text-center text-black/70 dark:text-white/70",children:["already have an account?"," ",e.jsx(y,{to:"/auth/login",className:"text-blue-500",children:"Login"})]})]})},B=({logoSize:a,className:r,showLogo:i=!0,showText:s=!0})=>e.jsxs(f,{className:`text-3xl flex gap-2 items-center ${r}`,children:[i&&e.jsx(E,{size:a}),s&&e.jsx("span",{children:"Ref.com"})]}),g=({children:a})=>{const{theme:r}=R();return e.jsxs("div",{className:"h-screen overflow-hidden",children:[e.jsx("div",{className:"fixed top-0 left-0 m-4",children:e.jsx(y,{to:"/",className:"w-fit",children:e.jsx(B,{className:""})})}),e.jsx("div",{className:"flex justify-center items-center w-full h-full",children:e.jsx("div",{className:"flex justify-center min-w-sm",children:a})}),e.jsx("div",{className:"fixed -z-10 top-0 left-0 w-full h-full bg-white dark:bg-black",children:e.jsx("img",{src:"/backgrounds/auth-dark.jpg",className:`w-full h-full object-cover ${r==="dark"?"":"invert"}`})})]})},C=2.5*60,Z=()=>{const{register:a,handleSubmit:r}=N(),i=z(),s=b(x=>x.user),t=w(),l=v(),[n,o]=p.useState(C);p.useEffect(()=>{if(n<=0)return;const x=setInterval(()=>{o(q=>q-1)},1e3);return()=>clearInterval(x)},[n]);const j=r(x=>{t(T({email:i.email,otp:x.otp}))}),c=()=>{t($()).then(()=>{o(C)})};return p.useEffect(()=>{s.isAuthenticated&&l("/workspace")},[s.isAuthenticated]),e.jsxs(P,{variant:"none",className:"p-6 flex flex-col gap-8 w-full backdrop-blur-xs",children:[e.jsx(f,{className:"text-center",children:"Signup"}),e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:j,children:[e.jsxs("p",{className:"text-center",children:["OTP sent to ",i.email]}),e.jsx(d,{...a("otp",{required:!0}),id:"otp",type:"text",placeholder:"OTP",className:"w-full",autoComplete:"name"}),e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("span",{children:`${Math.floor(n/60)}:${(n%60).toString().padStart(2,"0")}`}),e.jsx(u,{disabled:(s==null?void 0:s.loading)||n>0,type:"button",variant:"link",onClick:c,className:s!=null&&s.loading||n>0?"":"hover:underline",children:"resend"})]}),e.jsxs(u,{disabled:s==null?void 0:s.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:[(s==null?void 0:s.loading)&&e.jsx(k,{className:"size-5"}),e.jsx("span",{children:"Verify"})]})]})]})},J=()=>e.jsxs(I,{children:[e.jsx(h,{path:"login",element:e.jsx(g,{children:e.jsx(V,{})})}),e.jsx(h,{path:"signup",element:e.jsx(g,{children:e.jsx(S,{})})}),e.jsx(h,{path:"otp/:email",element:e.jsx(g,{children:e.jsx(Z,{})})}),e.jsx(h,{path:"*",element:e.jsx(F,{})})]});export{J as default};
