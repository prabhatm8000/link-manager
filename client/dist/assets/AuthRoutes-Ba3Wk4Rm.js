import{u as w,c as b,r as p,l as F,j as e,e as O,b as z,f as R,h as $}from"./index-D_kBh24d.js";import I from"./PageNotFound-CuPQ9TUo.js";import{u as N,T as j,B as u,L as v,a as y,b as D,c as S,R as V,d as h}from"./AppRouter-BCJl_qAS.js";import{u as C,C as P,a as k,b as q,c as A,L as m,I as d,d as T}from"./index.esm-CNpvQ9PD.js";const B=()=>{const{register:l,handleSubmit:n,formState:{errors:r}}=C(),s=w(o=>o.user),t=b(),a=N();p.useEffect(()=>{s!=null&&s.isAuthenticated&&a("/workspace")},[s]);const i=n(o=>{t(F({email:o.email,password:o.password}))});return e.jsxs(P,{className:"max-w-80 w-full bg-transparent backdrop-blur-xs border-muted-foreground",children:[e.jsx(k,{children:e.jsx(q,{children:e.jsx(j,{className:"text-center",children:"Login"})})}),e.jsx(A,{children:e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:i,children:[e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(d,{...l("email",{required:"This field is required."}),id:"email",type:"email",placeholder:"Email",className:"w-full",autoComplete:"email"}),r.email&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:r.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(d,{...l("password",{required:"This field is required."}),id:"password",type:"password",placeholder:"Password",className:"w-full",autoComplete:"password"}),r.password&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:r.password.message})]}),e.jsxs(u,{disabled:s==null?void 0:s.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:[(s==null?void 0:s.loading)&&e.jsx(v,{className:"size-5"}),e.jsx("span",{children:"Login"})]})]})}),e.jsx(T,{className:"justify-center",children:e.jsxs("div",{className:"text-center text-black/70 dark:text-white/70",children:["don't have an account?"," ",e.jsx(y,{to:"/auth/signup",className:"text-blue-500",children:"Signup"})]})})]})},Z=()=>{const{register:l,handleSubmit:n,getValues:r,watch:s,formState:{errors:t}}=C(),a=w(c=>c.user),i=b(),o=N(),f=n(c=>{i(O({email:c.email,name:c.name,password:c.password}))});return p.useEffect(()=>{!(a!=null&&a.error)&&!(a!=null&&a.loading)&&(a!=null&&a.isOtpSent)&&o("/auth/otp/"+r("email"))},[a]),e.jsxs(P,{className:"max-w-80 w-full bg-transparent backdrop-blur-xs border-muted-foreground",children:[e.jsx(k,{children:e.jsx(q,{children:e.jsx(j,{className:"text-center",children:"Signup"})})}),e.jsx(A,{children:e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:f,children:[e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"name",children:"Name"}),e.jsx(d,{...l("name",{required:"Name is required"}),id:"name",type:"text",placeholder:"Name",className:"w-full",autoComplete:"name"}),t.name&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.name.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(d,{...l("email",{required:"Email is required"}),id:"email",type:"email",placeholder:"Email",className:"w-full",autoComplete:"email"}),t.email&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.email.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(d,{...l("password",{required:"Password is required",pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Password must be at least 8 characters, and contain at least one uppercase letter, one lowercase letter, one number, and one special character"}}),id:"password",type:"password",placeholder:"Password",className:"w-full",autoComplete:"new-password"}),t.password&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.password.message})]}),e.jsxs("div",{className:"flex flex-col gap-1 relative pb-4",children:[e.jsx(m,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(d,{...l("confirmPassword",{required:"Confirm Password is required",validate:c=>{if(c!==s("password"))return"Passwords do not match"}}),id:"confirmPassword",type:"password",placeholder:"Confirm Password",className:"w-full",autoComplete:"new-password"}),t.confirmPassword&&e.jsx("span",{className:"text-red-500 text-xs absolute bottom-0",children:t.confirmPassword.message})]}),e.jsxs(u,{disabled:a==null?void 0:a.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:[(a==null?void 0:a.loading)&&e.jsx(v,{className:"size-5"}),e.jsx("span",{children:"Signup"})]})]})}),e.jsx(T,{children:e.jsxs("div",{className:"text-center text-black/70 dark:text-white/70",children:["already have an account?"," ",e.jsx(y,{to:"/auth/login",className:"text-blue-500",children:"Login"})]})})]})},H=({logoSize:l,className:n,showLogo:r=!0,showText:s=!0})=>e.jsxs(j,{className:`text-3xl flex gap-2 items-center ${n}`,children:[r&&e.jsx(z,{size:l}),s&&e.jsx("span",{children:"Ref.com"})]}),g=({children:l})=>{const{theme:n}=D();return e.jsxs("div",{className:"h-screen overflow-hidden",children:[e.jsx("div",{className:"fixed top-0 left-0 m-4",children:e.jsx(y,{to:"/",className:"w-fit",children:e.jsx(H,{className:""})})}),e.jsx("div",{className:"flex justify-center items-center w-full h-full",children:l}),e.jsx("div",{className:"fixed -z-10 top-0 left-0 w-full h-full bg-white dark:bg-black",children:e.jsx("img",{src:"/backgrounds/auth-dark.jpg",className:`w-full h-full object-cover ${n==="dark"?"":"invert"}`})})]})},L=2.5*60,M=()=>{const{register:l,handleSubmit:n}=C(),r=S(),s=w(x=>x.user),t=b(),a=N(),[i,o]=p.useState(L);p.useEffect(()=>{if(i<=0)return;const x=setInterval(()=>{o(E=>E-1)},1e3);return()=>clearInterval(x)},[i]);const f=n(x=>{t(R({email:r.email,otp:x.otp}))}),c=()=>{t($()).then(()=>{o(L)})};return p.useEffect(()=>{s.isAuthenticated&&a("/workspace")},[s.isAuthenticated]),e.jsxs(P,{className:"max-w-80 w-full bg-transparent backdrop-blur-xs border-muted-foreground",children:[e.jsx(k,{children:e.jsx(q,{children:e.jsx(j,{className:"text-center",children:"Signup"})})}),e.jsx(A,{children:e.jsxs("form",{className:"flex flex-col gap-6",onSubmit:f,children:[e.jsxs("p",{className:"text-center",children:["OTP sent to ",r.email]}),e.jsx(d,{...l("otp",{required:!0}),id:"otp",type:"text",placeholder:"OTP",className:"w-full",autoComplete:"name"}),e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("span",{children:`${Math.floor(i/60)}:${(i%60).toString().padStart(2,"0")}`}),e.jsx(u,{disabled:(s==null?void 0:s.loading)||i>0,type:"button",variant:"link",onClick:c,className:s!=null&&s.loading||i>0?"":"hover:underline",children:"resend"})]}),e.jsxs(u,{disabled:s==null?void 0:s.loading,type:"submit",className:"mt-2 px-4 flex items-center justify-center gap-2",children:[(s==null?void 0:s.loading)&&e.jsx(v,{className:"size-5"}),e.jsx("span",{children:"Verify"})]})]})})]})},Q=()=>e.jsxs(V,{children:[e.jsx(h,{path:"login",element:e.jsx(g,{children:e.jsx(B,{})})}),e.jsx(h,{path:"signup",element:e.jsx(g,{children:e.jsx(Z,{})})}),e.jsx(h,{path:"otp/:email",element:e.jsx(g,{children:e.jsx(M,{})})}),e.jsx(h,{path:"*",element:e.jsx(I,{})})]});export{Q as default};
