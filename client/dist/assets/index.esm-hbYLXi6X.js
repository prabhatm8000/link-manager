import{r as R,j as re,h as At,R as B}from"./index-8qozvXh8.js";import{k as mt}from"./AppRouter-CKUuexZ3.js";function Ke(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function st(...e){return r=>{let t=!1;const n=e.map(u=>{const l=Ke(u,r);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let u=0;u<n.length;u++){const l=n[u];typeof l=="function"?l():Ke(e[u],null)}}}}function rr(...e){return R.useCallback(st(...e),e)}var it=R.forwardRef((e,r)=>{const{children:t,...n}=e,u=R.Children.toArray(t),l=u.find(pt);if(l){const c=l.props.children,g=u.map(C=>C===l?R.Children.count(c)>1?R.Children.only(null):R.isValidElement(c)?c.props.children:null:C);return re.jsx(Ce,{...n,ref:r,children:R.isValidElement(c)?R.cloneElement(c,void 0,g):null})}return re.jsx(Ce,{...n,ref:r,children:t})});it.displayName="Slot";var Ce=R.forwardRef((e,r)=>{const{children:t,...n}=e;if(R.isValidElement(t)){const u=Dt(t),l=wt(n,t.props);return t.type!==R.Fragment&&(l.ref=r?st(r,u):u),R.cloneElement(t,l)}return R.Children.count(t)>1?R.Children.only(null):null});Ce.displayName="SlotClone";var xt=({children:e})=>re.jsx(re.Fragment,{children:e});function pt(e){return R.isValidElement(e)&&e.type===xt}function wt(e,r){const t={...r};for(const n in r){const u=e[n],l=r[n];/^on[A-Z]/.test(n)?u&&l?t[n]=(...g)=>{l(...g),u(...g)}:u&&(t[n]=u):n==="style"?t[n]={...u,...l}:n==="className"&&(t[n]=[u,l].filter(Boolean).join(" "))}return{...e,...t}}function Dt(e){var n,u;let r=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(r=(u=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:u.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var Et=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],St=Et.reduce((e,r)=>{const t=R.forwardRef((n,u)=>{const{asChild:l,...c}=n,g=l?it:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),re.jsx(g,{...c,ref:u})});return t.displayName=`Primitive.${r}`,{...e,[r]:t}},{});function sr(e,r){e&&At.flushSync(()=>e.dispatchEvent(r))}var kt="Label",nt=R.forwardRef((e,r)=>re.jsx(St.label,{...e,ref:r,onMouseDown:t=>{var u;t.target.closest("button, input, select, textarea")||((u=e.onMouseDown)==null||u.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));nt.displayName=kt;var Ct=nt;function ir({className:e,...r}){return re.jsx(Ct,{"data-slot":"label",className:mt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}var de=e=>e.type==="checkbox",te=e=>e instanceof Date,L=e=>e==null;const lt=e=>typeof e=="object";var x=e=>!L(e)&&!Array.isArray(e)&&lt(e)&&!te(e),Rt=e=>x(e)&&e.target?de(e.target)?e.target.checked:e.target.value:e,Ot=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Lt=(e,r)=>e.has(Ot(r)),Nt=e=>{const r=e.constructor&&e.constructor.prototype;return x(r)&&r.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){let r;const t=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Oe&&(e instanceof Blob||n))&&(t||x(e)))if(r=t?[]:{},!t&&!Nt(e))r=e;else for(const u in e)e.hasOwnProperty(u)&&(r[u]=M(e[u]));else return e;return r}var me=e=>Array.isArray(e)?e.filter(Boolean):[],p=e=>e===void 0,y=(e,r,t)=>{if(!r||!x(e))return t;const n=me(r.split(/[,[\].]+?/)).reduce((u,l)=>L(u)?u:u[l],e);return p(n)||n===e?p(e[r])?t:e[r]:n},q=e=>typeof e=="boolean",Le=e=>/^\w*$/.test(e),at=e=>me(e.replace(/["|']|\]/g,"").split(/\.|\[/)),A=(e,r,t)=>{let n=-1;const u=Le(r)?[r]:at(r),l=u.length,c=l-1;for(;++n<l;){const g=u[n];let C=t;if(n!==c){const W=e[g];C=x(W)||Array.isArray(W)?W:isNaN(+u[n+1])?{}:[]}if(g==="__proto__"||g==="constructor"||g==="prototype")return;e[g]=C,e=e[g]}return e};const ze={BLUR:"blur",FOCUS_OUT:"focusout"},j={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},J={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};B.createContext(null);var Tt=(e,r,t,n=!0)=>{const u={defaultValues:r._defaultValues};for(const l in e)Object.defineProperty(u,l,{get:()=>{const c=l;return r._proxyFormState[c]!==j.all&&(r._proxyFormState[c]=!n||j.all),e[c]}});return u},N=e=>x(e)&&!Object.keys(e).length,Pt=(e,r,t,n)=>{t(e);const{name:u,...l}=e;return N(l)||Object.keys(l).length>=Object.keys(r).length||Object.keys(l).find(c=>r[c]===j.all)},be=e=>Array.isArray(e)?e:[e];function Ut(e){const r=B.useRef(e);r.current=e,B.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}var $=e=>typeof e=="string",Mt=(e,r,t,n,u)=>$(e)?(n&&r.watch.add(e),y(t,e,u)):Array.isArray(e)?e.map(l=>(n&&r.watch.add(l),y(t,l))):(n&&(r.watchAll=!0),t),Bt=(e,r,t,n,u)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[n]:u||!0}}:{},Ye=e=>({isOnSubmit:!e||e===j.onSubmit,isOnBlur:e===j.onBlur,isOnChange:e===j.onChange,isOnAll:e===j.all,isOnTouch:e===j.onTouched}),Ze=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const ce=(e,r,t,n)=>{for(const u of t||Object.keys(e)){const l=y(e,u);if(l){const{_f:c,...g}=l;if(c){if(c.refs&&c.refs[0]&&r(c.refs[0],u)&&!n)return!0;if(c.ref&&r(c.ref,c.name)&&!n)return!0;if(ce(g,r))break}else if(x(g)&&ce(g,r))break}}};var It=(e,r,t)=>{const n=be(y(e,t));return A(n,"root",r[t]),A(e,t,n),e},Ne=e=>e.type==="file",H=e=>typeof e=="function",Fe=e=>{if(!Oe)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},_e=e=>$(e),Te=e=>e.type==="radio",Ve=e=>e instanceof RegExp;const Je={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var ut=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!p(e[0].attributes.value)?p(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Je}return Je};const Xe={isValid:!1,value:null};var ot=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,Xe):Xe;function Ge(e,r,t="validate"){if(_e(e)||Array.isArray(e)&&e.every(_e)||q(e)&&!e)return{type:t,message:_e(e)?e:"",ref:r}}var ne=e=>x(e)&&!Ve(e)?e:{value:e,message:""},et=async(e,r,t,n,u,l)=>{const{ref:c,refs:g,required:C,maxLength:W,minLength:m,min:_,max:ye,pattern:ge,validate:K,name:T,valueAsNumber:z,mount:Q}=e._f,F=y(t,T);if(!Q||r.has(T))return{};const Y=g?g[0]:c,Z=b=>{u&&Y.reportValidity&&(Y.setCustomValidity(q(b)?"":b||""),Y.reportValidity())},w={},se=Te(c),he=de(c),ee=se||he,ie=(z||Ne(c))&&p(c.value)&&p(F)||Fe(c)&&c.value===""||F===""||Array.isArray(F)&&!F.length,P=Bt.bind(null,T,n,w),ve=(b,V,D,O=J.maxLength,I=J.minLength)=>{const U=b?V:D;w[T]={type:b?O:I,message:U,ref:c,...P(b?O:I,U)}};if(l?!Array.isArray(F)||!F.length:C&&(!ee&&(ie||L(F))||q(F)&&!F||he&&!ut(g).isValid||se&&!ot(g).isValid)){const{value:b,message:V}=_e(C)?{value:!!C,message:C}:ne(C);if(b&&(w[T]={type:J.required,message:V,ref:Y,...P(J.required,V)},!n))return Z(V),w}if(!ie&&(!L(_)||!L(ye))){let b,V;const D=ne(ye),O=ne(_);if(!L(F)&&!isNaN(F)){const I=c.valueAsNumber||F&&+F;L(D.value)||(b=I>D.value),L(O.value)||(V=I<O.value)}else{const I=c.valueAsDate||new Date(F),U=ue=>new Date(new Date().toDateString()+" "+ue),le=c.type=="time",ae=c.type=="week";$(D.value)&&F&&(b=le?U(F)>U(D.value):ae?F>D.value:I>new Date(D.value)),$(O.value)&&F&&(V=le?U(F)<U(O.value):ae?F<O.value:I<new Date(O.value))}if((b||V)&&(ve(!!b,D.message,O.message,J.max,J.min),!n))return Z(w[T].message),w}if((W||m)&&!ie&&($(F)||l&&Array.isArray(F))){const b=ne(W),V=ne(m),D=!L(b.value)&&F.length>+b.value,O=!L(V.value)&&F.length<+V.value;if((D||O)&&(ve(D,b.message,V.message),!n))return Z(w[T].message),w}if(ge&&!ie&&$(F)){const{value:b,message:V}=ne(ge);if(Ve(b)&&!F.match(b)&&(w[T]={type:J.pattern,message:V,ref:c,...P(J.pattern,V)},!n))return Z(V),w}if(K){if(H(K)){const b=await K(F,t),V=Ge(b,Y);if(V&&(w[T]={...V,...P(J.validate,V.message)},!n))return Z(V.message),w}else if(x(K)){let b={};for(const V in K){if(!N(b)&&!n)break;const D=Ge(await K[V](F,t),Y,V);D&&(b={...D,...P(V,D.message)},Z(D.message),n&&(w[T]=b))}if(!N(b)&&(w[T]={ref:Y,...b},!n))return w}}return Z(!0),w};function jt(e,r){const t=r.slice(0,-1).length;let n=0;for(;n<t;)e=p(e)?n++:e[r[n++]];return e}function Wt(e){for(const r in e)if(e.hasOwnProperty(r)&&!p(e[r]))return!1;return!0}function E(e,r){const t=Array.isArray(r)?r:Le(r)?[r]:at(r),n=t.length===1?e:jt(e,t),u=t.length-1,l=t[u];return n&&delete n[l],u!==0&&(x(n)&&N(n)||Array.isArray(n)&&Wt(n))&&E(e,t.slice(0,-1)),e}var Ee=()=>{let e=[];return{get observers(){return e},next:u=>{for(const l of e)l.next&&l.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(l=>l!==u)}}),unsubscribe:()=>{e=[]}}},Re=e=>L(e)||!lt(e);function G(e,r){if(Re(e)||Re(r))return e===r;if(te(e)&&te(r))return e.getTime()===r.getTime();const t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(const u of t){const l=e[u];if(!n.includes(u))return!1;if(u!=="ref"){const c=r[u];if(te(l)&&te(c)||x(l)&&x(c)||Array.isArray(l)&&Array.isArray(c)?!G(l,c):l!==c)return!1}}return!0}var ft=e=>e.type==="select-multiple",qt=e=>Te(e)||de(e),Se=e=>Fe(e)&&e.isConnected,ct=e=>{for(const r in e)if(H(e[r]))return!0;return!1};function Ae(e,r={}){const t=Array.isArray(e);if(x(e)||t)for(const n in e)Array.isArray(e[n])||x(e[n])&&!ct(e[n])?(r[n]=Array.isArray(e[n])?[]:{},Ae(e[n],r[n])):L(e[n])||(r[n]=!0);return r}function dt(e,r,t){const n=Array.isArray(e);if(x(e)||n)for(const u in e)Array.isArray(e[u])||x(e[u])&&!ct(e[u])?p(r)||Re(t[u])?t[u]=Array.isArray(e[u])?Ae(e[u],[]):{...Ae(e[u])}:dt(e[u],L(r)?{}:r[u],t[u]):t[u]=!G(e[u],r[u]);return t}var oe=(e,r)=>dt(e,r,Ae(r)),yt=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:n})=>p(e)?e:r?e===""?NaN:e&&+e:t&&$(e)?new Date(e):n?n(e):e;function ke(e){const r=e.ref;return Ne(r)?r.files:Te(r)?ot(e.refs).value:ft(r)?[...r.selectedOptions].map(({value:t})=>t):de(r)?ut(e.refs).value:yt(p(r.value)?e.ref.value:r.value,e)}var Ht=(e,r,t,n)=>{const u={};for(const l of e){const c=y(r,l);c&&A(u,l,c._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:n}},fe=e=>p(e)?e:Ve(e)?e.source:x(e)?Ve(e.value)?e.value.source:e.value:e;const tt="AsyncFunction";var $t=e=>!!e&&!!e.validate&&!!(H(e.validate)&&e.validate.constructor.name===tt||x(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===tt)),Kt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function rt(e,r,t){const n=y(e,t);if(n||Le(t))return{error:n,name:t};const u=t.split(".");for(;u.length;){const l=u.join("."),c=y(r,l),g=y(e,l);if(c&&!Array.isArray(c)&&t!==l)return{name:t};if(g&&g.type)return{name:l,error:g};u.pop()}return{name:t}}var zt=(e,r,t,n,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(r||e):(t?n.isOnBlur:u.isOnBlur)?!e:(t?n.isOnChange:u.isOnChange)?e:!0,Yt=(e,r)=>!me(y(e,r)).length&&E(e,r);const Zt={mode:j.onSubmit,reValidateMode:j.onChange,shouldFocusError:!0};function Jt(e={}){let r={...Zt,...e},t={submitCount:0,isDirty:!1,isLoading:H(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},n={},u=x(r.defaultValues)||x(r.values)?M(r.defaultValues||r.values)||{}:{},l=r.shouldUnregister?{}:M(u),c={action:!1,mount:!1,watch:!1},g={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},C,W=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={values:Ee(),array:Ee(),state:Ee()},ye=Ye(r.mode),ge=Ye(r.reValidateMode),K=r.criteriaMode===j.all,T=s=>i=>{clearTimeout(W),W=setTimeout(s,i)},z=async s=>{if(!r.disabled&&(m.isValid||s)){const i=r.resolver?N((await ee()).errors):await P(n,!0);i!==t.isValid&&_.state.next({isValid:i})}},Q=(s,i)=>{!r.disabled&&(m.isValidating||m.validatingFields)&&((s||Array.from(g.mount)).forEach(a=>{a&&(i?A(t.validatingFields,a,i):E(t.validatingFields,a))}),_.state.next({validatingFields:t.validatingFields,isValidating:!N(t.validatingFields)}))},F=(s,i=[],a,d,f=!0,o=!0)=>{if(d&&a&&!r.disabled){if(c.action=!0,o&&Array.isArray(y(n,s))){const h=a(y(n,s),d.argA,d.argB);f&&A(n,s,h)}if(o&&Array.isArray(y(t.errors,s))){const h=a(y(t.errors,s),d.argA,d.argB);f&&A(t.errors,s,h),Yt(t.errors,s)}if(m.touchedFields&&o&&Array.isArray(y(t.touchedFields,s))){const h=a(y(t.touchedFields,s),d.argA,d.argB);f&&A(t.touchedFields,s,h)}m.dirtyFields&&(t.dirtyFields=oe(u,l)),_.state.next({name:s,isDirty:b(s,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else A(l,s,i)},Y=(s,i)=>{A(t.errors,s,i),_.state.next({errors:t.errors})},Z=s=>{t.errors=s,_.state.next({errors:t.errors,isValid:!1})},w=(s,i,a,d)=>{const f=y(n,s);if(f){const o=y(l,s,p(a)?y(u,s):a);p(o)||d&&d.defaultChecked||i?A(l,s,i?o:ke(f._f)):O(s,o),c.mount&&z()}},se=(s,i,a,d,f)=>{let o=!1,h=!1;const v={name:s};if(!r.disabled){const S=!!(y(n,s)&&y(n,s)._f&&y(n,s)._f.disabled);if(!a||d){m.isDirty&&(h=t.isDirty,t.isDirty=v.isDirty=b(),o=h!==v.isDirty);const k=S||G(y(u,s),i);h=!!(!S&&y(t.dirtyFields,s)),k||S?E(t.dirtyFields,s):A(t.dirtyFields,s,!0),v.dirtyFields=t.dirtyFields,o=o||m.dirtyFields&&h!==!k}if(a){const k=y(t.touchedFields,s);k||(A(t.touchedFields,s,a),v.touchedFields=t.touchedFields,o=o||m.touchedFields&&k!==a)}o&&f&&_.state.next(v)}return o?v:{}},he=(s,i,a,d)=>{const f=y(t.errors,s),o=m.isValid&&q(i)&&t.isValid!==i;if(r.delayError&&a?(C=T(()=>Y(s,a)),C(r.delayError)):(clearTimeout(W),C=null,a?A(t.errors,s,a):E(t.errors,s)),(a?!G(f,a):f)||!N(d)||o){const h={...d,...o&&q(i)?{isValid:i}:{},errors:t.errors,name:s};t={...t,...h},_.state.next(h)}},ee=async s=>{Q(s,!0);const i=await r.resolver(l,r.context,Ht(s||g.mount,n,r.criteriaMode,r.shouldUseNativeValidation));return Q(s),i},ie=async s=>{const{errors:i}=await ee(s);if(s)for(const a of s){const d=y(i,a);d?A(t.errors,a,d):E(t.errors,a)}else t.errors=i;return i},P=async(s,i,a={valid:!0})=>{for(const d in s){const f=s[d];if(f){const{_f:o,...h}=f;if(o){const v=g.array.has(o.name),S=f._f&&$t(f._f);S&&m.validatingFields&&Q([d],!0);const k=await et(f,g.disabled,l,K,r.shouldUseNativeValidation&&!i,v);if(S&&m.validatingFields&&Q([d]),k[o.name]&&(a.valid=!1,i))break;!i&&(y(k,o.name)?v?It(t.errors,k,o.name):A(t.errors,o.name,k[o.name]):E(t.errors,o.name))}!N(h)&&await P(h,i,a)}}return a.valid},ve=()=>{for(const s of g.unMount){const i=y(n,s);i&&(i._f.refs?i._f.refs.every(a=>!Se(a)):!Se(i._f.ref))&&xe(s)}g.unMount=new Set},b=(s,i)=>!r.disabled&&(s&&i&&A(l,s,i),!G(Pe(),u)),V=(s,i,a)=>Mt(s,g,{...c.mount?l:p(i)?u:$(s)?{[s]:i}:i},a,i),D=s=>me(y(c.mount?l:u,s,r.shouldUnregister?y(u,s,[]):[])),O=(s,i,a={})=>{const d=y(n,s);let f=i;if(d){const o=d._f;o&&(!o.disabled&&A(l,s,yt(i,o)),f=Fe(o.ref)&&L(i)?"":i,ft(o.ref)?[...o.ref.options].forEach(h=>h.selected=f.includes(h.value)):o.refs?de(o.ref)?o.refs.length>1?o.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(f)?!!f.find(v=>v===h.value):f===h.value)):o.refs[0]&&(o.refs[0].checked=!!f):o.refs.forEach(h=>h.checked=h.value===f):Ne(o.ref)?o.ref.value="":(o.ref.value=f,o.ref.type||_.values.next({name:s,values:{...l}})))}(a.shouldDirty||a.shouldTouch)&&se(s,f,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ue(s)},I=(s,i,a)=>{for(const d in i){const f=i[d],o=`${s}.${d}`,h=y(n,o);(g.array.has(s)||x(f)||h&&!h._f)&&!te(f)?I(o,f,a):O(o,f,a)}},U=(s,i,a={})=>{const d=y(n,s),f=g.array.has(s),o=M(i);A(l,s,o),f?(_.array.next({name:s,values:{...l}}),(m.isDirty||m.dirtyFields)&&a.shouldDirty&&_.state.next({name:s,dirtyFields:oe(u,l),isDirty:b(s,o)})):d&&!d._f&&!L(o)?I(s,o,a):O(s,o,a),Ze(s,g)&&_.state.next({...t}),_.values.next({name:c.mount?s:void 0,values:{...l}})},le=async s=>{c.mount=!0;const i=s.target;let a=i.name,d=!0;const f=y(n,a),o=()=>i.type?ke(f._f):Rt(s),h=v=>{d=Number.isNaN(v)||te(v)&&isNaN(v.getTime())||G(v,y(l,a,v))};if(f){let v,S;const k=o(),X=s.type===ze.BLUR||s.type===ze.FOCUS_OUT,_t=!Kt(f._f)&&!r.resolver&&!y(t.errors,a)&&!f._f.deps||zt(X,y(t.touchedFields,a),t.isSubmitted,ge,ye),we=Ze(a,g,X);A(l,a,k),X?(f._f.onBlur&&f._f.onBlur(s),C&&C(0)):f._f.onChange&&f._f.onChange(s);const De=se(a,k,X,!1),Ft=!N(De)||we;if(!X&&_.values.next({name:a,type:s.type,values:{...l}}),_t)return m.isValid&&(r.mode==="onBlur"&&X?z():X||z()),Ft&&_.state.next({name:a,...we?{}:De});if(!X&&we&&_.state.next({...t}),r.resolver){const{errors:He}=await ee([a]);if(h(k),d){const Vt=rt(t.errors,n,a),$e=rt(He,n,Vt.name||a);v=$e.error,a=$e.name,S=N(He)}}else Q([a],!0),v=(await et(f,g.disabled,l,K,r.shouldUseNativeValidation))[a],Q([a]),h(k),d&&(v?S=!1:m.isValid&&(S=await P(n,!0)));d&&(f._f.deps&&ue(f._f.deps),he(a,S,v,De))}},ae=(s,i)=>{if(y(t.errors,i)&&s.focus)return s.focus(),1},ue=async(s,i={})=>{let a,d;const f=be(s);if(r.resolver){const o=await ie(p(s)?s:f);a=N(o),d=s?!f.some(h=>y(o,h)):a}else s?(d=(await Promise.all(f.map(async o=>{const h=y(n,o);return await P(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!d&&!t.isValid)&&z()):d=a=await P(n);return _.state.next({...!$(s)||m.isValid&&a!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:a}:{},errors:t.errors}),i.shouldFocus&&!d&&ce(n,ae,s?f:g.mount),d},Pe=s=>{const i={...c.mount?l:u};return p(s)?i:$(s)?y(i,s):s.map(a=>y(i,a))},Ue=(s,i)=>({invalid:!!y((i||t).errors,s),isDirty:!!y((i||t).dirtyFields,s),error:y((i||t).errors,s),isValidating:!!y(t.validatingFields,s),isTouched:!!y((i||t).touchedFields,s)}),gt=s=>{s&&be(s).forEach(i=>E(t.errors,i)),_.state.next({errors:s?t.errors:{}})},Me=(s,i,a)=>{const d=(y(n,s,{_f:{}})._f||{}).ref,f=y(t.errors,s)||{},{ref:o,message:h,type:v,...S}=f;A(t.errors,s,{...S,...i,ref:d}),_.state.next({name:s,errors:t.errors,isValid:!1}),a&&a.shouldFocus&&d&&d.focus&&d.focus()},ht=(s,i)=>H(s)?_.values.subscribe({next:a=>s(V(void 0,i),a)}):V(s,i,!0),xe=(s,i={})=>{for(const a of s?be(s):g.mount)g.mount.delete(a),g.array.delete(a),i.keepValue||(E(n,a),E(l,a)),!i.keepError&&E(t.errors,a),!i.keepDirty&&E(t.dirtyFields,a),!i.keepTouched&&E(t.touchedFields,a),!i.keepIsValidating&&E(t.validatingFields,a),!r.shouldUnregister&&!i.keepDefaultValue&&E(u,a);_.values.next({values:{...l}}),_.state.next({...t,...i.keepDirty?{isDirty:b()}:{}}),!i.keepIsValid&&z()},Be=({disabled:s,name:i,field:a,fields:d})=>{(q(s)&&c.mount||s||g.disabled.has(i))&&(s?g.disabled.add(i):g.disabled.delete(i),se(i,ke(a?a._f:y(d,i)._f),!1,!1,!0))},pe=(s,i={})=>{let a=y(n,s);const d=q(i.disabled)||q(r.disabled);return A(n,s,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:s}},name:s,mount:!0,...i}}),g.mount.add(s),a?Be({field:a,disabled:q(i.disabled)?i.disabled:r.disabled,name:s}):w(s,!0,i.value),{...d?{disabled:i.disabled||r.disabled}:{},...r.progressive?{required:!!i.required,min:fe(i.min),max:fe(i.max),minLength:fe(i.minLength),maxLength:fe(i.maxLength),pattern:fe(i.pattern)}:{},name:s,onChange:le,onBlur:le,ref:f=>{if(f){pe(s,i),a=y(n,s);const o=p(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,h=qt(o),v=a._f.refs||[];if(h?v.find(S=>S===o):o===a._f.ref)return;A(n,s,{_f:{...a._f,...h?{refs:[...v.filter(Se),o,...Array.isArray(y(u,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),w(s,!1,void 0,o)}else a=y(n,s,{}),a._f&&(a._f.mount=!1),(r.shouldUnregister||i.shouldUnregister)&&!(Lt(g.array,s)&&c.action)&&g.unMount.add(s)}}},Ie=()=>r.shouldFocusError&&ce(n,ae,g.mount),vt=s=>{q(s)&&(_.state.next({disabled:s}),ce(n,(i,a)=>{const d=y(n,a);d&&(i.disabled=d._f.disabled||s,Array.isArray(d._f.refs)&&d._f.refs.forEach(f=>{f.disabled=d._f.disabled||s}))},0,!1))},je=(s,i)=>async a=>{let d;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let f=M(l);if(g.disabled.size)for(const o of g.disabled)A(f,o,void 0);if(_.state.next({isSubmitting:!0}),r.resolver){const{errors:o,values:h}=await ee();t.errors=o,f=h}else await P(n);if(E(t.errors,"root"),N(t.errors)){_.state.next({errors:{}});try{await s(f,a)}catch(o){d=o}}else i&&await i({...t.errors},a),Ie(),setTimeout(Ie);if(_.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:N(t.errors)&&!d,submitCount:t.submitCount+1,errors:t.errors}),d)throw d},bt=(s,i={})=>{y(n,s)&&(p(i.defaultValue)?U(s,M(y(u,s))):(U(s,i.defaultValue),A(u,s,M(i.defaultValue))),i.keepTouched||E(t.touchedFields,s),i.keepDirty||(E(t.dirtyFields,s),t.isDirty=i.defaultValue?b(s,M(y(u,s))):b()),i.keepError||(E(t.errors,s),m.isValid&&z()),_.state.next({...t}))},We=(s,i={})=>{const a=s?M(s):u,d=M(a),f=N(s),o=f?u:d;if(i.keepDefaultValues||(u=a),!i.keepValues){if(i.keepDirtyValues){const h=new Set([...g.mount,...Object.keys(oe(u,l))]);for(const v of Array.from(h))y(t.dirtyFields,v)?A(o,v,y(l,v)):U(v,y(o,v))}else{if(Oe&&p(s))for(const h of g.mount){const v=y(n,h);if(v&&v._f){const S=Array.isArray(v._f.refs)?v._f.refs[0]:v._f.ref;if(Fe(S)){const k=S.closest("form");if(k){k.reset();break}}}}n={}}l=r.shouldUnregister?i.keepDefaultValues?M(u):{}:M(o),_.array.next({values:{...o}}),_.values.next({values:{...o}})}g={mount:i.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!m.isValid||!!i.keepIsValid||!!i.keepDirtyValues,c.watch=!!r.shouldUnregister,_.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:f?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!G(s,u)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:i.keepDirtyValues?i.keepDefaultValues&&l?oe(u,l):t.dirtyFields:i.keepDefaultValues&&s?oe(u,s):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},qe=(s,i)=>We(H(s)?s(l):s,i);return{control:{register:pe,unregister:xe,getFieldState:Ue,handleSubmit:je,setError:Me,_executeSchema:ee,_getWatch:V,_getDirty:b,_updateValid:z,_removeUnmounted:ve,_updateFieldArray:F,_updateDisabledField:Be,_getFieldArray:D,_reset:We,_resetDefaultValues:()=>H(r.defaultValues)&&r.defaultValues().then(s=>{qe(s,r.resetOptions),_.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_disableForm:vt,_subjects:_,_proxyFormState:m,_setErrors:Z,get _fields(){return n},get _formValues(){return l},get _state(){return c},set _state(s){c=s},get _defaultValues(){return u},get _names(){return g},set _names(s){g=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:ue,register:pe,handleSubmit:je,watch:ht,setValue:U,getValues:Pe,reset:qe,resetField:bt,clearErrors:gt,unregister:xe,setError:Me,setFocus:(s,i={})=>{const a=y(n,s),d=a&&a._f;if(d){const f=d.refs?d.refs[0]:d.ref;f.focus&&(f.focus(),i.shouldSelect&&H(f.select)&&f.select())}},getFieldState:Ue}}function nr(e={}){const r=B.useRef(void 0),t=B.useRef(void 0),[n,u]=B.useState({isDirty:!1,isValidating:!1,isLoading:H(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:H(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...Jt(e),formState:n});const l=r.current.control;return l._options=e,Ut({subject:l._subjects.state,next:c=>{Pt(c,l._proxyFormState,l._updateFormState)&&u({...l._formState})}}),B.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),B.useEffect(()=>{if(l._proxyFormState.isDirty){const c=l._getDirty();c!==n.isDirty&&l._subjects.state.next({isDirty:c})}},[l,n.isDirty]),B.useEffect(()=>{e.values&&!G(e.values,t.current)?(l._reset(e.values,l._options.resetOptions),t.current=e.values,u(c=>({...c}))):l._resetDefaultValues()},[e.values,l]),B.useEffect(()=>{e.errors&&l._setErrors(e.errors)},[e.errors,l]),B.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),B.useEffect(()=>{e.shouldUnregister&&l._subjects.values.next({values:l._getWatch()})},[e.shouldUnregister,l]),r.current.formState=Tt(n,l),r.current}export{ir as L,St as P,rr as a,st as c,sr as d,nr as u};
